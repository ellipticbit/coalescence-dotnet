before_script:
  - "git clean -fdxq"
  - "git submodule sync --recursive"
  - "git submodule foreach --recursive git reset --hard"
  - "git submodule update --init --recursive"

Test Deployment:
  tags:
    - linux
    - dotnet

  except:
    - master

  script:
    - "dotnet restore NetCore.csproj"
    - "powershell.exe -file \"..\\ReplaceVersion.ps1\""
    - "dotnet pack -c Debug -o .\\"

Production Deployment:
  tags:
    - windows
    - dotnet

  only:
    - master

  script:
    - "dotnet restore NetCore.csproj"
    - "powershell.exe -file \"..\\ReplaceVersion.ps1\""
    - "dotnet pack -c Release -o .\\"
    - "dotnet nuget push *.nupkg -k %NUGET_API_KEY% -s \"https://www.nuget.org\""
